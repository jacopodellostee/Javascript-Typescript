<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file main.js
 * @author Jacopo Dell'Oste
 * 
 * @description
 * A turn-based Hangman game where two players guess letters to uncover a hidden word.
 * Players take turns, gain or lose points based on guesses, and the game ends when the word is completed or guesses run out.
 */

// === DOM Elements ===

/** @type {HTMLElement} */
const wordDisplay = document.querySelector(".word");

/** @type {HTMLElement} */
const resultDisplay = document.querySelector(".result");

/** @type {HTMLImageElement} */
const hangmanDisplay = document.querySelector("#hangman-image");

/** @type {HTMLInputElement} */
const P1Guess = document.getElementById("P1guess");

/** @type {HTMLInputElement} */
const P2Guess = document.getElementById("P2guess");

// === Game Configuration ===

/** @type {string[]} */
const words = ["CAT", "DOG", "FROG", "FOX", "SHIP"];

/** @type {string[]} */
let word = [];

/** @type {string[]} */
let guess = [];

/** @type {number} */
const maxGuess = 6;

/** @type {number} */
let P1Guesses = maxGuess;

/** @type {number} */
let P2Guesses = maxGuess;

/** @type {number} */
let hangmanIndex = 0;

/** @type {number} */
let reward = 0;

/** @type {boolean} */
let gameOver = false;

/** @type {number} */
let currentPlayer = 1; // 1 = Player 1, 2 = Player 2

/** @type {string[]} */
const hangmanState = [
    '4.jpg', '5.jpg', '6.jpg', '7.jpg', '8.jpg', '9.jpg', '10.jpg'
];

// === Core Game Functions ===

/**
 * Randomly selects a word from the list.
 * @returns {string[]} The chosen word as an array of letters.
 */
function chooseWord() {
    let randomIndex = Math.floor(Math.random() * words.length);
    return words[randomIndex].split("");
}

/**
 * Creates an array of underscores for the word length.
 * @returns {string[]} Array of underscores representing the unguessed word.
 */
function letterToGuess() {
    return Array(word.length).fill("_");
}

/**
 * Updates the visual display of the word, game status, and hangman image.
 * @returns {void}
 */
function updateDisplay() {

    wordDisplay.textContent = guess.join(" ");

    hangmanDisplay.src = `./img/hangman/${hangmanState[hangmanIndex]}`;

    if (gameOver) {
        if (!guess.includes("_")) {
            resultDisplay.textContent = `Player ${currentPlayer} wins! Reward: ${reward}`;
        } else {
            resultDisplay.textContent = `Game Over! The word was: ${word.join("")}`;
        }
    } else {
        resultDisplay.textContent = `Player ${currentPlayer}'s turn | P1 Guesses left: ${P1Guesses} | P2 Guesses left: ${P2Guesses} | Reward: ${reward}`;
    }
}

/**
 * Processes a guessed letter, updates score and game state.
 * @param {string} letter - The guessed letter.
 * @returns {void}
 */
function guessLetter(letter) {
    if (gameOver) return;

    let correct = false;

    for (let i = 0; i &lt; word.length; i++) {

        if (word[i] === letter &amp;&amp; guess[i] === "_") {

            guess[i] = letter;

            correct = true;
        }
    }

    if (correct) {
        reward += Math.floor(Math.random() * 11);

    } else {
        reward -= Math.floor(Math.random() * 11);

        hangmanIndex++;

        if (currentPlayer === 1) 
            P1Guesses--;
        else
            P2Guesses--;
    }

    if (!guess.includes("_") || (P1Guesses &lt;= 0 &amp;&amp; P2Guesses &lt;= 0)) {
        gameOver = true;
    }

    if (!correct) {
        currentPlayer = currentPlayer === 1 ? 2 : 1;
    }

    updateDisplay();
}

/**
 * Handles guess input from players.
 * @param {HTMLInputElement} playerInput - Input element for the current player.
 * @returns {void}
 */
function handleGuess(playerInput) {

    const letter = playerInput.value.toUpperCase();

    playerInput.value = "";

    if (!letter.match(/^[A-Z]$/)) 
        return;

    if (guess.includes(letter)) 
        return;

    guessLetter(letter);
}

/**
 * Checks if it’s the correct player's turn and blocks input otherwise.
 * @param {HTMLInputElement} inputElement - Input box.
 * @param {number} playerNum - Player number (1 or 2).
 * @returns {void}
 */
function checkTurn(inputElement, playerNum) {

    if (currentPlayer !== playerNum || gameOver) {

        inputElement.blur();

        return;
    }
}

// === Game Initialization ===

word = chooseWord();

guess = letterToGuess();

updateDisplay();

// === Event Listeners ===

P1Guess.addEventListener('focus', () => checkTurn(P1Guess, 1));

P2Guess.addEventListener('focus', () => checkTurn(P2Guess, 2));

P1Guess.addEventListener('keypress', e => {
    if (e.key === "Enter" &amp;&amp; currentPlayer === 1) {
        handleGuess(P1Guess);
    }
});

P2Guess.addEventListener('keypress', e => {
    if (e.key === "Enter" &amp;&amp; currentPlayer === 2) {
        handleGuess(P2Guess);
    }
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#P1Guess">P1Guess</a></li><li><a href="global.html#P1Guesses">P1Guesses</a></li><li><a href="global.html#P2Guess">P2Guess</a></li><li><a href="global.html#P2Guesses">P2Guesses</a></li><li><a href="global.html#checkTurn">checkTurn</a></li><li><a href="global.html#chooseWord">chooseWord</a></li><li><a href="global.html#currentPlayer">currentPlayer</a></li><li><a href="global.html#gameOver">gameOver</a></li><li><a href="global.html#guess">guess</a></li><li><a href="global.html#guessLetter">guessLetter</a></li><li><a href="global.html#handleGuess">handleGuess</a></li><li><a href="global.html#hangmanDisplay">hangmanDisplay</a></li><li><a href="global.html#hangmanIndex">hangmanIndex</a></li><li><a href="global.html#hangmanState">hangmanState</a></li><li><a href="global.html#letterToGuess">letterToGuess</a></li><li><a href="global.html#maxGuess">maxGuess</a></li><li><a href="global.html#resultDisplay">resultDisplay</a></li><li><a href="global.html#reward">reward</a></li><li><a href="global.html#updateDisplay">updateDisplay</a></li><li><a href="global.html#word">word</a></li><li><a href="global.html#wordDisplay">wordDisplay</a></li><li><a href="global.html#words">words</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Apr 29 2025 14:14:18 GMT+0200 (Ora legale dell’Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
